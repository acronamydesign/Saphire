var path = require("path"),
		mongoose = require("mongoose"),
		databaseConf = require(path.resolve(__dirname,"../../")+"/database.json"),
		colors = require("colors");

module.exports = {
	toSaphire: "mongodb://" + databaseConf.host + ":" + databaseConf.port + "/" + databaseConf.database,
	mongoose: mongoose,
	get connectApp() {
		return this.mongoose.connect(this.toSaphire)
	},
	get open() {
		return this.connectApp.connection
	},
	connect: function () {
		var db = this.open;
		db.on('error', function (err) {
			console.log('connection error'.red, err);
		});
		db.once('open', function () {
			console.log('connected to mongoose.'.green);
		});
		return db;
	}
}
