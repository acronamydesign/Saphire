module.exports = function buildAdminMenu(saphireRegistry){
	var purposes = []
for(item in saphireRegistry){
	var item = saphireRegistry[item].replace("saphire-","");
	purposes.push(item)
}

var adminMenu = {}
for(item in purposes){
	var data = purposes[item].split(":");
	var saphireModuleName = data[0]
	var saphireModuleVersion = data[1];
	adminMenu[saphireModuleName] = {
		name:saphireModuleName,
		version:saphireModuleVersion,
		menuEntry:{
			title:saphireModuleName.charAt(0).toUpperCase()+saphireModuleName.slice(1),
			href:"admin/"+saphireModuleName
		}
	}
}

//tidy up
delete adminMenu["saphire"]["menuEntry"]
delete adminMenu["admin"]["menuEntry"]

//add extras - will change themes to its own module soon

adminMenu["dashboard"] = {
	name:"dashboard",
	adminIndex:true,
	menuEntry:{
		title:"Dashboard",
		href:"admin/dashboard"
	}
}
if(adminMenu["regions"]){
	adminMenu["appearance"] = {
		name:"appearance",
		menuEntry:{
			title:"Appearance",
			href:"admin/appearance"
		}
	}
}

this["adminMenu"] = adminMenu

}


