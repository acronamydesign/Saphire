saphireRouter = require('./admin-routes/express-short-route.js'),
	express = require('express'),
	saphire = require('saphire');

//console.log(saphire)

adminMenuEnabled = ["dashboard","regions","appearance"]

for(item in adminMenuEnabled){
	var enabled = adminMenuEnabled;
	var selector = enabled[item];
	console.log(saphire[selector])
}

var adminIndex = {
	url:"/admin",
	alias:"admin/dashboard"
}

var purposes = {
	dashboard:{
		url:adminIndex.alias,
		data:{
			title:"Dashboard",
			purpose:"dashboard"
		}
	},
	blocks:{
		url:"admin/blocks",
		data:{
			title:"Blocks",
			purpose:"blocks"
		}
	},
	appearance:{
		url:"admin/appearance",
		data:{
			title:"Appearance",
			purpose:"appearance"
		}
	}
}

var adminTemplate = __dirname+"/admin-views/admin.jade";
var saphireAdmin = {

	routes:function(app){
		app.get(adminIndex.url, function(req, res) {
			res.redirect(adminIndex.alias);
		});
		//set styles path for admin
		app.use('/admin/css', express.static(__dirname+'/admin-views/styles/'));


		//easier route creation
		var i = 0;
		for(purpose in purposes){
				var purposeUrl = purposes[purpose]["url"]
				var purposeData = purposes[purpose]["data"]
				//adding some extra props
				purposeData.availablePurposes = Object.keys(purposes)
				//TO DO AUTO WRITE JADE TEMPLATE WHEN ADDED TO OBJECT maybe json the purpose object as a protype page manager
				saphireRouter.create(app,{
						url:purposeUrl,
						template:adminTemplate
					}, purposeData );
		}

	}

}
module.exports = saphireAdmin;
