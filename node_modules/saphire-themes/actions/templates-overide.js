var path = require("path"),
	jade = require("jade")

module.exports = function (pathDetail, systemPathDetail) {

	//compare the theme content array and system templates object

	for (item in systemPathDetail) {
		var compairKey = systemPathDetail[item];
		for (item in pathDetail) {
			//theme dir files should replace system object values
			var themeJadeFilename = pathDetail[item][0]

			if (compairKey["name"] == themeJadeFilename) {
				compairKey["path"] = pathDetail[item][1] //give the new path from the theme to the system.
			}
		}
	}
	//assign purposes
	//if region, if page, if page-type, if html
	for (template in systemPathDetail) {
		if (/html/g.test(systemPathDetail[template]["name"])) {
			systemPathDetail[template]["type"] = "html"
			systemPathDetail[template]["context"] = "default"
		} else if (/page/g.test(systemPathDetail[template]["name"])) {
			systemPathDetail[template]["type"] = "page"
			systemPathDetail[template]["context"] = "default"
		} else if (/region/g.test(systemPathDetail[template]["name"])) {
			systemPathDetail[template]["type"] = "region"
			systemPathDetail[template]["context"] = "default"
		} else if (/category/g.test(systemPathDetail[template]["name"])) {
			systemPathDetail[template]["type"] = "category"
			systemPathDetail[template]["context"] = "default"
		}
	}
	//new overides or regular
	//assign to compile
	for (template in systemPathDetail) {
		if (systemPathDetail[template]["context"] == "default") {
			//DEFAULT behavior no BEM file names
			if (systemPathDetail[template]["type"] == "html") {
				var head = jade.compileFile(systemPathDetail[template]["path"])
			}
			if (systemPathDetail[template]["type"] == "page") {
				var body = jade.compileFile(systemPathDetail[template]["path"])
			}
		}
	}
	var markup = {
		head: head,
		body: body
	}
	return markup;
}
